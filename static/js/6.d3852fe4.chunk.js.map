{"version":3,"sources":["unauthenticated-app/login.tsx","unauthenticated-app/register.tsx","assets/logo.svg","assets/left.svg","assets/right.svg","unauthenticated-app/index.tsx"],"names":["LoginScreen","onError","login","useAuth","useAsync","undefined","throwOnError","run","isLoading","handleSubmit","values","a","onFinish","Item","name","rules","required","message","placeholder","type","id","LongButton","loading","htmlType","RegisterScreen","register","cPassword","password","Error","UnauthenticatedApp","useState","isRegister","setIsRegister","error","setError","useDocumentTitle","Container","Header","Background","ShadowCard","Title","style","userSelect","onClick","styled","Button","TypographyError","Typography","Text","h2","div","left","right","header","logo","Card"],"mappings":"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","file":"static/js/6.d3852fe4.chunk.js","sourcesContent":["/*\r\n * @Description: 登录页面\r\n * @Author: 杨超（yangchao）\r\n * @Email: Angry_bull@126.com\r\n * @Date: 2021-11-04 16:14:01\r\n * @LastEditTime: 2021-11-12 15:15:40\r\n * @LastEditors: 杨超（yangchao）\r\n */\r\nimport React from 'react'\r\nimport { useAuth } from 'context/auth-context'\r\nimport { Form, Input } from 'antd'\r\nimport { LongButton } from 'unauthenticated-app'\r\nimport { useAsync } from 'utils/use-async'\r\n\r\nexport const LoginScreen = ({ onError }: { onError: (error: Error) => void }) => {\r\n  const { login } = useAuth()\r\n  const { run, isLoading } = useAsync(undefined, { throwOnError: true })\r\n\r\n  const handleSubmit = async (values: { username: string; password: string }) => {\r\n    // 不用useAsync返回的error原因：run()函数调用，使用的是setState异步更新 无法读取最新值（读取到的error为null）\r\n    try {\r\n      // login 为异步函数需要promise处理，等待错误抛出\r\n      await run(login(values))\r\n    } catch (error) {\r\n      onError(error as Error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Form onFinish={handleSubmit}>\r\n      <Form.Item name=\"username\" rules={[{ required: true, message: '请输入用户名!' }]}>\r\n        <Input placeholder={'用户名'} type=\"text\" id={'username'} />\r\n      </Form.Item>\r\n      <Form.Item name=\"password\" rules={[{ required: true, message: '请输入密码!' }]}>\r\n        <Input placeholder={'密码'} type=\"text\" id={'password'} />\r\n      </Form.Item>\r\n      <LongButton loading={isLoading} htmlType={'submit'} type=\"primary\">\r\n        登陆\r\n      </LongButton>\r\n    </Form>\r\n  )\r\n}\r\n","/*\r\n * @Description: 注册页面\r\n * @Author: 杨超（yangchao）\r\n * @Email: Angry_bull@126.com\r\n * @Date: 2021-11-04 16:14:01\r\n * @LastEditTime: 2021-11-12 15:04:40\r\n * @LastEditors: 杨超（yangchao）\r\n */\r\nimport React from 'react'\r\nimport { useAuth } from 'context/auth-context'\r\nimport { Form, Input } from 'antd'\r\nimport { LongButton } from 'unauthenticated-app'\r\nimport { useAsync } from 'utils/use-async'\r\n\r\nexport const RegisterScreen = ({ onError }: { onError: (error: Error) => void }) => {\r\n  const { register } = useAuth()\r\n  const { run, isLoading } = useAsync(undefined, { throwOnError: true })\r\n\r\n  const handleSubmit = async ({ cPassword, ...values }: { cPassword: string; username: string; password: string }) => {\r\n    // 不用useAsync返回的error原因：run()函数调用，使用的是setState异步更新 无法读取最新值（读取到的error为null）\r\n    if (cPassword !== values.password) return onError(new Error('请确认两次输入的密码相同'))\r\n    try {\r\n      // register 为异步函数需要promise处理，等待错误抛出\r\n      await run(register(values))\r\n    } catch (error) {\r\n      onError(error as Error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Form onFinish={handleSubmit}>\r\n      <Form.Item name=\"username\" rules={[{ required: true, message: '请输入用户名' }]}>\r\n        <Input placeholder={'用户名'} type=\"text\" id={'username'} />\r\n      </Form.Item>\r\n      <Form.Item name=\"password\" rules={[{ required: true, message: '请输入密码' }]}>\r\n        <Input placeholder={'密码'} type=\"text\" id={'password'} />\r\n      </Form.Item>\r\n      <Form.Item name=\"cPassword\" rules={[{ required: true, message: '请确认密码' }]}>\r\n        <Input placeholder={'确认密码'} type=\"text\" id={'cPassword'} />\r\n      </Form.Item>\r\n      <LongButton loading={isLoading} htmlType={'submit'} type=\"primary\">\r\n        注册\r\n      </LongButton>\r\n    </Form>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo.8bb06c97.svg\";","export default __webpack_public_path__ + \"static/media/left.e74de3ec.svg\";","export default __webpack_public_path__ + \"static/media/right.890da620.svg\";","/*\r\n * @Description: 登录 or 注册\r\n * @Author: 杨超（yangchao）\r\n * @Email: Angry_bull@126.com\r\n * @Date: 2021-11-04 16:14:01\r\n * @LastEditTime: 2022-03-28 13:35:37\r\n * @LastEditors: 杨超\r\n */\r\nimport React, { useState } from 'react'\r\nimport { Button, Card, Divider, Typography } from 'antd'\r\nimport { LoginScreen } from './login'\r\nimport { RegisterScreen } from './register'\r\nimport styled from '@emotion/styled'\r\nimport logo from 'assets/logo.svg'\r\nimport left from 'assets/left.svg'\r\nimport right from 'assets/right.svg'\r\nimport { useDocumentTitle } from 'utils'\r\nimport { ErrorBox } from 'components/lib'\r\n\r\nconst UnauthenticatedApp = () => {\r\n  const [isRegister, setIsRegister] = useState(false)\r\n  const [error, setError] = useState<Error | null>(null)\r\n\r\n  useDocumentTitle('Jira任务管理系统')\r\n\r\n  const handleTabRegLog = () => {\r\n    setIsRegister(!isRegister)\r\n    setError(null)\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Header />\r\n      <Background />\r\n      <ShadowCard>\r\n        <Title>{isRegister ? '请注册' : '请登录'}</Title>\r\n        <ErrorBox error={error} />\r\n        {isRegister ? <RegisterScreen onError={setError} /> : <LoginScreen onError={setError} />}\r\n        <Divider />\r\n        <Button type={'link'} style={{ userSelect: 'none' }} onClick={handleTabRegLog}>\r\n          {isRegister ? '已经有账号了？直接登录' : '没有账号？注册新账号'}\r\n        </Button>\r\n      </ShadowCard>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default UnauthenticatedApp\r\n\r\nexport const LongButton = styled(Button)`\r\n  width: 100%;\r\n`\r\n\r\nexport const TypographyError = styled(Typography.Text)`\r\n  display: block;\r\n  margin-bottom: 2rem;\r\n`\r\n\r\nconst Title = styled.h2`\r\n  margin-bottom: 2.4rem;\r\n  color: rgb(94, 108, 132);\r\n`\r\n\r\nconst Background = styled.div`\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-attachment: fixed;\r\n  background-position: left bottom, right bottom;\r\n  background-size: calc(((100vw - 40rem) / 2) - 3.2rem), calc(((100vw - 40rem) / 2) - 3.2rem), cover;\r\n  background-image: url(${left}), url(${right});\r\n`\r\n\r\nconst Header = styled.header`\r\n  background: url(${logo}) no-repeat center;\r\n  padding: 5rem 0;\r\n  background-size: 8rem;\r\n  width: 100%;\r\n  height: 1rem;\r\n`\r\n\r\nconst ShadowCard = styled(Card)`\r\n  width: 40rem;\r\n  min-height: 50rem;\r\n  padding: 3.2rem 4rem;\r\n  border-radius: 0.3rem;\r\n  box-sizing: border-box;\r\n  box-shadow: rgba(0, 0, 0, 0.1) 0 0 10px;\r\n  text-align: center;\r\n`\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n`\r\n"],"sourceRoot":""}